// Prisma schema for Nature's Way Soil website.

// The SQLite database lives in the prisma directory.  When
// deploying to production you can swap this out for PostgreSQL or
// another database by changing the provider and url values.
datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

/// A customer represents someone who has created an account or placed an order.
model Customer {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  phone     String?
  address   String?
  orders    Order[]
  createdAt DateTime @default(now())
}

/// An order records a purchase for a given product.  Each order
/// references a single product by its ASIN.  In a real system you
/// would likely normalise this into its own table or embed a copy of
/// the product data, but this simple representation is sufficient for
/// demonstration purposes.
model Order {
  id          Int      @id @default(autoincrement())
  customer    Customer @relation(fields: [customerId], references: [id])
  customerId  Int
  productAsin String
  quantity    Int
  total       Float
  createdAt   DateTime @default(now())
}

/// Contact messages submitted from the contact page.  These are
/// stored so the business can reply to enquiries.
model Contact {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  message   String
  createdAt DateTime @default(now())
}